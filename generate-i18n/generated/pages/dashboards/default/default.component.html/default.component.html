<div class="container-fluid">
  <!-- start page title {{ '-->' | translate }}
  <div class="row">
    <div class="col-12">
      <div class="page-title-box d-flex align-items-center justify-content-between">
        <h4 class="mb-0 font-size-18">{{ 'Tableau_de_bord' | translate }} </h4>
        <div class="page-title-right">
          <ol class="breadcrumb m-0">
            <li class="breadcrumb-item active">{{ 'Bienvenue_Ã _bord_!' | translate }}</li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xl-4">
      <div class="card">
        <div class="card-body">
          <app-stat [title]="session.isPartner ? '{{ 'Produit' | translate }}s' : 'Commande'" [value]="nbOrders" icon="bx bx-shopping-bag"></app-stat>
        </div>
      </div>
    </div>
    <div class="col-xl-4">
      <div class="card">
        <div class="card-body">
          <app-stat title="Revenu" [value]="'MAD '+revenue" icon="bx bx-money"></app-stat>
        </div>
      </div>
    </div>
    <div class="col-xl-4">
      <div class="card">
        <div class="card-body">
          <app-stat title="{{ 'Prix' | translate }} moyen" [value]="'MAD '+round(average)" icon="bx bx-stats"></app-stat>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <h4 class="card-title mb-4 float-sm-left">Evolution moyenne des {{session.isPartner ? 'produits' : 'commandes'}}</h4>
      <div class="clearfix"></div>
      <apx-chart dir="ltr" class="apex-charts" [chart]="emailSentBarChart.chart" [series]="emailSentBarChart.series"
        [legend]="emailSentBarChart.legend" [colors]="emailSentBarChart.colors" [fill]="emailSentBarChart.fill"
        [dataLabels]="emailSentBarChart.dataLabels" [xaxis]="emailSentBarChart.xaxis"
        [plotOptions]="emailSentBarChart.plotOptions">
      </apx-chart>
    </div>
  </div>


  <form [formGroup]="formData">
    <div class="row ">
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <div formArrayName="products">
              <div>
                <div class="table-responsive">
                  <table class="table table-centered mb-0 table-nowrap">
                    <thead class="thead-light">
                      <tr>
                        <th>Produit</th>
                        <th>{{ 'Description_du_produit' | translate }}</th>
                        <th>Prix</th>
                        <th>{{ 'Stock' | translate }}</th>
                        <th>{{ 'Nombre_de_commandes' | translate }}</th>
                      </tr>
                    </thead>
                    <tbody>

                      <tr *ngFor="let control of form().controls">
                        <!-- <td class="avatar-sm" *ngIf="!control.value.product.imageURL">
                          <span class="avatar-sm avatar-title rounded-circle bg-soft-primary text-primary font-size-16">
                            {{control.value.product.name.charAt(0)}}
                          </span>
                        </td>
                        <td *ngIf="control.value.product.imageURL">
                          <img class="rounded-circle avatar-sm" #img (error)="imgError(img)" [src]="displayImage(control.value.product.imageURL)" alt="" title="" />
                        </td> -->
                        <td>
                          <img class="rounded-circle avatar-sm" [src]="displayImage(control.value.product.imageURL)"
                            alt="" title="" />
                        </td>
                        <td>
                          <h5 class="font-size-14 text-truncate">
                            <a class="text-dark">{{control.value.product.name}}</a>
                          </h5>
                        </td>
                        <td>
                          {{control.value.product.price}}
                        </td>
                        <td>
                          {{control.value.product.stock}}
                        </td>
                        <td>
                          {{control.value.product.saleCount}}
                        </td>
                      </tr>

                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>

</div> <!-- container-fluid -->
