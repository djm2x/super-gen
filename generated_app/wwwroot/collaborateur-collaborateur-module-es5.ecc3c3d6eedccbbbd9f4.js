!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"2CEo":function(e,n,a){"use strict";a.r(n),a.d(n,"CollaborateurModule",function(){return ut});var o=a("ofXK"),r=a("tyNb"),c=a("mrSG"),l=a("fXoL"),b=a("VRyK"),u=a("3Pt+"),s=a("0IaG"),m=a("V2kc"),f=a("XNiG"),d=a("QZ4V"),p=a("7q3A"),h=a("/t3+"),v=a("f0Cb"),g=a("kmnG"),S=a("qFsG"),R=a("d3UM"),y=a("5WMv"),k=a("bTqV"),w=a("FKr1");function C(t,e){if(1&t&&(l.Sb(0,"mat-option",17),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.jc("value",i),l.Bb(1),l.Bc(i)}}function A(t,e){if(1&t&&(l.Sb(0,"mat-option",17),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.jc("value",i),l.Bb(1),l.Bc(i)}}function B(t,e){if(1&t){var i=l.Tb();l.Sb(0,"button",18),l.Zb("click",function(){l.qc(i);var t=l.dc();return t.onOkClick(t.myForm.value)}),l.Ac(1,"Enregistre"),l.Rb()}if(2&t){var n=l.dc();l.jc("disabled",n.myForm.invalid)}}var F,x=((F=function(){function e(i,n,a,o){t(this,e),this.dialogRef=i,this.data=n,this.fb=a,this.uow=o,this.subs=[],this.title="",this.visualisation=!1,this.entities=d,this.folderToSaveInServer="collaborateurs",this.imageUrlTo=new f.a,this.imageUrlFrom=new f.a,this.eventSubmitFromParent=new f.a}return i(e,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.o=this.data.model,this.title=this.data.title,this.visualisation=this.data.visualisation,this.createForm(),this.imageUrlFrom.subscribe(function(t){return e.myForm.get("imageUrl").setValue(t)}),setTimeout(function(){setTimeout(function(){e.imageUrlTo.next(e.o.imageUrl)},100)},100);case 1:case"end":return t.stop()}},t,this)}))}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onOkClick",value:function(t){var e,i=this;e=0===t.id?this.uow.collaborateurs.post(t).subscribe(function(e){i.eventSubmitFromParent.next(!0),i.dialogRef.close(t)}):this.uow.collaborateurs.put(t.id,t).subscribe(function(e){i.eventSubmitFromParent.next(!0),i.dialogRef.close(t)}),this.subs.push(e)}},{key:"createForm",value:function(){this.myForm=this.fb.group({id:[this.o.id,[u.t.required]],nom:[this.o.nom,[u.t.required]],prenom:[this.o.prenom,[u.t.required]],matricule:[this.o.matricule,[u.t.required]],imageUrl:[this.o.imageUrl],entity:[this.o.entity,[u.t.required]],fonction:[this.o.fonction,[u.t.required]]})}},{key:"resetForm",value:function(){this.o=new m.b,this.createForm()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(t){t.unsubscribe()})}}]),e}()).\u0275fac=function(t){return new(t||F)(l.Mb(s.g),l.Mb(s.a),l.Mb(u.d),l.Mb(p.a))},F.\u0275cmp=l.Gb({type:F,selectors:[["app-update"]],decls:37,vars:9,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],[3,"formGroup"],["appearance","fill",1,"col-md-6"],["matInput","","formControlName","nom","required",""],["matInput","","formControlName","prenom","required",""],["matInput","","formControlName","matricule","required",""],["formControlName","entity"],[3,"value",4,"ngFor","ngForOf"],["formControlName","fonction"],[1,"col-md-12"],["nameBtn","Image",3,"folderToSaveInServer","propertyOfParent","eventSubmitToParent","eventSubmitFromParent"],["align","end"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"h1",1),l.Sb(2,"mat-toolbar",2),l.Sb(3,"span"),l.Ac(4),l.Rb(),l.Rb(),l.Nb(5,"mat-divider"),l.Rb(),l.Sb(6,"div",3),l.Sb(7,"mat-dialog-content"),l.Sb(8,"form",4),l.Sb(9,"mat-form-field",5),l.Sb(10,"mat-label"),l.Ac(11,"nom"),l.Rb(),l.Nb(12,"input",6),l.Rb(),l.Sb(13,"mat-form-field",5),l.Sb(14,"mat-label"),l.Ac(15,"prenom"),l.Rb(),l.Nb(16,"input",7),l.Rb(),l.Sb(17,"mat-form-field",5),l.Sb(18,"mat-label"),l.Ac(19,"matricule"),l.Rb(),l.Nb(20,"input",8),l.Rb(),l.Sb(21,"mat-form-field",5),l.Sb(22,"mat-label"),l.Ac(23,"entities"),l.Rb(),l.Sb(24,"mat-select",9),l.yc(25,C,2,2,"mat-option",10),l.Rb(),l.Rb(),l.Sb(26,"mat-form-field",5),l.Sb(27,"mat-label"),l.Ac(28,"Fonctions"),l.Rb(),l.Sb(29,"mat-select",11),l.yc(30,A,2,2,"mat-option",10),l.Rb(),l.Rb(),l.Sb(31,"div",12),l.Nb(32,"app-upload-image",13),l.Rb(),l.Rb(),l.Rb(),l.Sb(33,"mat-dialog-actions",14),l.Sb(34,"button",15),l.Zb("click",function(){return e.onNoClick()}),l.Ac(35,"Annuler"),l.Rb(),l.yc(36,B,2,1,"button",16),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Bb(4),l.Bc(e.title),l.Bb(4),l.jc("formGroup",e.myForm),l.Bb(17),l.jc("ngForOf",e.entities),l.Bb(5),l.jc("ngForOf",e.uow.fonctions),l.Bb(2),l.jc("folderToSaveInServer",e.folderToSaveInServer)("propertyOfParent",e.imageUrlTo)("eventSubmitToParent",e.imageUrlFrom)("eventSubmitFromParent",e.eventSubmitFromParent),l.Bb(4),l.jc("ngIf",!e.visualisation))},directives:[s.h,h.a,v.a,s.e,u.u,u.o,u.h,g.c,g.f,S.b,u.c,u.n,u.g,u.s,R.a,o.k,y.a,s.c,k.a,o.l,w.m],styles:[""]}),F),j=a("M9IT"),I=a("Dh3D"),D=a("JX91"),N=a("hUFt"),P=a("NFeN"),O=a("7EHt"),T=a("+0xr"),q=a("Xa2L");function M(t,e){if(1&t&&(l.Sb(0,"mat-option",31),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.jc("value",i),l.Bb(1),l.Bc(i)}}function U(t,e){1&t&&l.Nb(0,"mat-spinner")}function L(t,e){if(1&t&&(l.Sb(0,"div",32),l.yc(1,U,1,0,"mat-spinner",33),l.Rb()),2&t){var i=l.dc();l.Bb(1),l.jc("ngIf",i.isLoadingResults)}}function E(t,e){1&t&&(l.Sb(0,"th",34),l.Ac(1,"Nom"),l.Rb())}function $(t,e){if(1&t&&(l.Sb(0,"td",35),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.Bb(1),l.Bc(i.nom)}}function G(t,e){1&t&&(l.Sb(0,"th",34),l.Ac(1,"Prenom"),l.Rb())}function V(t,e){if(1&t&&(l.Sb(0,"td",35),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.Bb(1),l.Bc(i.prenom)}}function Z(t,e){1&t&&(l.Sb(0,"th",34),l.Ac(1,"Matricule"),l.Rb())}function Q(t,e){if(1&t&&(l.Sb(0,"td",35),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.Bb(1),l.Bc(i.matricule)}}function z(t,e){1&t&&(l.Sb(0,"th",36),l.Ac(1,"Photo"),l.Rb())}function H(t,e){if(1&t){var i=l.Tb();l.Sb(0,"td",35),l.Sb(1,"img",37,38),l.Zb("error",function(){l.qc(i);var t=l.oc(2);return l.dc().imgError(t)}),l.Rb(),l.Rb()}if(2&t){var n=e.$implicit,a=l.dc();l.Bb(1),l.jc("src",a.displayImage(n.imageUrl),l.rc)}}function J(t,e){1&t&&(l.Sb(0,"th",34),l.Ac(1,"Entity"),l.Rb())}function K(t,e){if(1&t&&(l.Sb(0,"td",35),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.Bb(1),l.Bc(i.entity)}}function X(t,e){1&t&&(l.Sb(0,"th",34),l.Ac(1,"fonction"),l.Rb())}function _(t,e){if(1&t&&(l.Sb(0,"td",35),l.Ac(1),l.Rb()),2&t){var i=e.$implicit;l.Bb(1),l.Bc(i.fonction)}}function W(t,e){1&t&&(l.Sb(0,"th",36),l.Ac(1," options "),l.Rb())}function Y(t,e){if(1&t){var i=l.Tb();l.Sb(0,"td",35),l.Sb(1,"div",39),l.Sb(2,"button",40),l.Zb("click",function(){l.qc(i);var t=e.$implicit;return l.dc().edit(t)}),l.Sb(3,"mat-icon"),l.Ac(4,"create"),l.Rb(),l.Rb(),l.Sb(5,"button",41),l.Zb("click",function(){l.qc(i);var t=e.$implicit;return l.dc().delete(t.id)}),l.Sb(6,"mat-icon"),l.Ac(7,"delete_sweep"),l.Rb(),l.Rb(),l.Rb(),l.Rb()}}function tt(t,e){1&t&&l.Nb(0,"tr",42)}function et(t,e){1&t&&l.Nb(0,"tr",43)}var it,nt,at,ot=function(){return[10,25,50,100,250]},rt=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(it=function(){function e(i,n,a,o){t(this,e),this.uow=i,this.dialog=n,this.mydialog=a,this.url=o,this.update=new l.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.subs=[],this.dataSource=[],this.selectedList=[],this.displayedColumns=["imageUrl","matricule","nom","prenom","entity","fonction","option"],this.panelOpenState=!1,this.nom=new u.e(""),this.prenom=new u.e(""),this.matricule=new u.e(""),this.entity=new u.e(""),this.entities=d}return i(e,[{key:"ngOnInit",value:function(){var t=this,e=Object(b.a)(this.sort.sortChange,this.paginator.page,this.update).pipe(Object(D.a)(null)).subscribe(function(e){!0===e?t.paginator.pageIndex=0:e=e,t.paginator.pageSize?e=e:t.paginator.pageSize=10;var i=t.paginator.pageIndex*t.paginator.pageSize;t.isLoadingResults=!0,t.getPage(i,t.paginator.pageSize,t.sort.active?t.sort.active:"id",t.sort.direction?t.sort.direction:"desc",""===t.nom.value?"*":t.nom.value,""===t.prenom.value?"*":t.prenom.value,""===t.matricule.value?"*":t.matricule.value,""===t.entity.value?"*":t.entity.value)});this.subs.push(e)}},{key:"reset",value:function(){this.nom.setValue(""),this.prenom.setValue(""),this.matricule.setValue(""),this.entity.setValue(""),this.update.next(!0)}},{key:"search",value:function(){this.update.next(!0)}},{key:"trackFn",value:function(t,e){return e.progressValue}},{key:"getPage",value:function(t,e,i,n,a,o,r,c){var l=this,b=this.uow.collaborateurs.getAll(t,e,i,n,a,o,r,c,-1).subscribe(function(t){console.log(t.list),l.dataSource=t.list,l.resultsLength=t.count,l.isLoadingResults=!1});this.subs.push(b)}},{key:"openDialog",value:function(t,e,i){return this.dialog.open(x,{width:"1100px",disableClose:!0,data:{model:t,title:e,visualisation:i}}).afterClosed()}},{key:"add",value:function(){var t=this;this.openDialog(new m.b,"Ajouter Collaborateur",!1).subscribe(function(e){e&&t.update.next(!0)})}},{key:"edit",value:function(t){var e=this;this.openDialog(t,"Modifier Collaborateur",!1).subscribe(function(t){t&&e.update.next(!0)})}},{key:"detail",value:function(t){var e=this;this.openDialog(t,"D\xe9tail Collaborateur",!0).subscribe(function(t){t&&e.update.next(!0)})}},{key:"delete",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mydialog.openDialog("Collaborateur").toPromise();case 2:if(e.t0=e.sent,"ok"!==e.t0){e.next=6;break}i=this.uow.collaborateurs.delete(t).subscribe(function(){return n.update.next(!0)}),this.subs.push(i);case 6:case"end":return e.stop()}},e,this)}))}},{key:"displayImage",value:function(t){return t?t&&t.startsWith("http")?t:"".concat(this.url,"/collaborateurs/").concat(t.replace(";","")):"assets/404.jpg"}},{key:"imgError",value:function(t){t.src="assets/404.jpg"}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(t){t.unsubscribe()})}}]),e}(),it.\u0275fac=function(t){return new(t||it)(l.Mb(p.a),l.Mb(s.b),l.Mb(N.a),l.Mb("BASE_URL"))},it.\u0275cmp=l.Gb({type:it,selectors:[["app-collaborateur"]],viewQuery:function(t,e){var i;1&t&&(l.uc(j.a,!0),l.uc(I.a,!0)),2&t&&(l.nc(i=l.ac())&&(e.paginator=i.first),l.nc(i=l.ac())&&(e.sort=i.first))},decls:73,vars:13,consts:[[1,"d-flex","flex-row-reverse","pt-3","mb-3"],["mat-raised-button","","color","primary",3,"click"],["expanded","",3,"opened","closed"],[1,"d-flex","align-items-center"],[1,"mb-0","ml-2"],[1,"mt-2"],["appearance","fill",1,"col-md-6"],["matInput","","required","",3,"formControl"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","flex-row-reverse","mb-2","mr-2"],["mat-raised-button","",3,"click"],[1,"example-container","mat-elevation-z8","mt-2"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource","trackBy"],["table",""],["matColumnDef","nom"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","prenom"],["matColumnDef","matricule"],["matColumnDef","imageUrl"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","entity"],["matColumnDef","fonction"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[3,"value"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["alt","","srcset","",3,"src","error"],["img",""],[1,"button-row"],["title","Modifier","mat-icon-button","","color","accent",3,"click"],["title","Supprimer","mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"button",1),l.Zb("click",function(){return e.add()}),l.Sb(2,"mat-icon"),l.Ac(3,"add"),l.Rb(),l.Ac(4," Collaborateur "),l.Rb(),l.Rb(),l.Sb(5,"mat-accordion"),l.Sb(6,"mat-expansion-panel",2),l.Zb("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),l.Sb(7,"mat-expansion-panel-header"),l.Sb(8,"mat-panel-title",3),l.Sb(9,"mat-icon"),l.Ac(10,"search"),l.Rb(),l.Sb(11,"p",4),l.Ac(12,"Recherche"),l.Rb(),l.Rb(),l.Nb(13,"mat-panel-description"),l.Rb(),l.Nb(14,"mat-divider"),l.Sb(15,"div",5),l.Sb(16,"mat-form-field",6),l.Sb(17,"mat-label"),l.Ac(18,"nom"),l.Rb(),l.Nb(19,"input",7),l.Rb(),l.Sb(20,"mat-form-field",6),l.Sb(21,"mat-label"),l.Ac(22,"prenom"),l.Rb(),l.Nb(23,"input",7),l.Rb(),l.Sb(24,"mat-form-field",6),l.Sb(25,"mat-label"),l.Ac(26,"matricule"),l.Rb(),l.Nb(27,"input",7),l.Rb(),l.Sb(28,"mat-form-field",6),l.Sb(29,"mat-label"),l.Ac(30,"entities"),l.Rb(),l.Sb(31,"mat-select",8),l.yc(32,M,2,2,"mat-option",9),l.Rb(),l.Rb(),l.Rb(),l.Sb(33,"div",10),l.Sb(34,"button",11),l.Zb("click",function(){return e.reset()}),l.Sb(35,"mat-icon"),l.Ac(36,"refresh"),l.Rb(),l.Ac(37," R\xe9initialiser "),l.Rb(),l.Ac(38," \xa0\xa0 "),l.Sb(39,"button",1),l.Zb("click",function(){return e.search()}),l.Sb(40,"mat-icon"),l.Ac(41,"search"),l.Rb(),l.Ac(42," FIltrer "),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(43,"div",12),l.yc(44,L,2,1,"div",13),l.Sb(45,"div",14),l.Sb(46,"table",15,16),l.Qb(48,17),l.yc(49,E,2,0,"th",18),l.yc(50,$,2,1,"td",19),l.Pb(),l.Qb(51,20),l.yc(52,G,2,0,"th",18),l.yc(53,V,2,1,"td",19),l.Pb(),l.Qb(54,21),l.yc(55,Z,2,0,"th",18),l.yc(56,Q,2,1,"td",19),l.Pb(),l.Qb(57,22),l.yc(58,z,2,0,"th",23),l.yc(59,H,3,1,"td",19),l.Pb(),l.Qb(60,24),l.yc(61,J,2,0,"th",18),l.yc(62,K,2,1,"td",19),l.Pb(),l.Qb(63,25),l.yc(64,X,2,0,"th",18),l.yc(65,_,2,1,"td",19),l.Pb(),l.Qb(66,26),l.yc(67,W,2,0,"th",23),l.yc(68,Y,8,0,"td",19),l.Pb(),l.yc(69,tt,1,0,"tr",27),l.yc(70,et,1,0,"tr",28),l.Rb(),l.Rb(),l.Nb(71,"mat-paginator",29,30),l.Rb()),2&t&&(l.Bb(19),l.jc("formControl",e.nom),l.Bb(4),l.jc("formControl",e.prenom),l.Bb(4),l.jc("formControl",e.matricule),l.Bb(4),l.jc("formControl",e.entity),l.Bb(1),l.jc("ngForOf",e.entities),l.Bb(12),l.jc("ngIf",e.isLoadingResults),l.Bb(2),l.jc("dataSource",e.dataSource)("trackBy",e.trackFn),l.Bb(23),l.jc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.jc("matRowDefColumns",e.displayedColumns),l.Bb(1),l.jc("length",e.resultsLength)("pageSizeOptions",l.kc(12,ot)))},directives:[k.a,P.a,O.a,O.c,O.e,O.f,O.d,v.a,g.c,g.f,S.b,u.c,u.s,u.n,u.f,R.a,o.k,o.l,T.n,I.a,T.c,T.i,T.b,T.k,T.m,j.a,w.m,q.b,T.h,I.b,T.a,T.j,T.l],styles:["img[_ngcontent-%COMP%]{height:60px;width:60px;padding:3px}"]}),it)}],ct=((nt=function e(){t(this,e)}).\u0275mod=l.Kb({type:nt}),nt.\u0275inj=l.Jb({factory:function(t){return new(t||nt)},imports:[[r.h.forChild(rt)],r.h]}),nt),lt=a("tk/3"),bt=a("Fr4G"),ut=((at=function e(){t(this,e)}).\u0275mod=l.Kb({type:at}),at.\u0275inj=l.Jb({factory:function(t){return new(t||at)},imports:[[o.c,ct,lt.c,q.a,T.o,P.b,k.b,g.e,j.b,O.b,v.b,s.f,h.b,R.b,u.i,u.r,bt.a,I.c,S.c]]}),at)}}])}();