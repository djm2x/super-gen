!function(){function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],o=!0,i=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(c){i=!0,n=c}finally{try{o||null==s.return||s.return()}finally{if(i)throw n}}return r}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Yj9t:function(e,o,n){"use strict";n.r(o),n.d(o,"AuthModule",function(){return z});var a=n("ofXK"),s=n("tyNb"),c=n("mrSG"),u=n("3Pt+"),m=n("V2kc"),l=n("AytR"),b=n("fXoL"),d=n("7q3A"),f=n("M0ag"),h=n("0kbX"),p=n("Wp6s"),y=n("r3Nu"),g=n("kmnG"),v=n("qFsG"),w=n("NFeN"),k=n("bTqV");function S(t,e){1&t&&(b.Sb(0,"mat-error"),b.Ac(1,"Email non valide"),b.Rb())}var R,E=function(){return["/activation"]},A=((R=function(){function t(e,o,i,n,a,s){r(this,t),this.fb=e,this.uow=o,this.router=i,this.session=n,this.route=a,this.snackBar=s,this.o=new m.f,this.hide=!0,this.isProd=l.a.production,this.code=""}return i(t,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.checkActivationStatus(),this.o.email="sa@angular.io",this.o.password="123",this.createForm(),this.code=this.route.snapshot.paramMap.get("code"),this.code&&""!==this.code&&this.submitCodeCommingFromEmail();case 1:case"end":return t.stop()}},t,this)}))}},{key:"checkActivationStatus",value:function(){var t=this;this.uow.activations.checkActivationStatus().subscribe(function(e){t.isProd&&-1===e.code&&t.router.navigate(["/activation"])})}},{key:"createForm",value:function(){this.myForm=this.fb.group({email:[this.o.email,[u.t.required,u.t.email]],password:[this.o.password,[u.t.required]]})}},{key:"submit",value:function(t){var e=this;this.uow.accounts.login(t).subscribe(function(t){t.code<0?e.snackBar.notifyAlert(400,t.message):(e.snackBar.notifyOk(200,t.message),e.session.doSignIn(t.user,t.token),e.router.navigate(["/admin"]))})}},{key:"submitCodeCommingFromEmail",value:function(){var t=this;this.uow.accounts.activeAccount(this.code).subscribe(function(e){e.code<0?t.snackBar.notifyAlert(400,e.message):(t.snackBar.notifyOk(200,e.message),t.session.doSignIn(e.user,e.token),t.router.navigate(["/admin"]))})}},{key:"resetForm",value:function(){this.o=new m.f,this.createForm()}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy")}},{key:"email",get:function(){return this.myForm.get("email")}},{key:"password",get:function(){return this.myForm.get("password")}},{key:"emailError",get:function(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}},{key:"passwordError",get:function(){return this.password.hasError("required")?"You must enter a value":""}}]),t}()).\u0275fac=function(t){return new(t||R)(b.Mb(u.d),b.Mb(d.a),b.Mb(s.e),b.Mb(f.c),b.Mb(s.a),b.Mb(h.a))},R.\u0275cmp=b.Gb({type:R,selectors:[["app-login"]],decls:29,vars:7,consts:[[1,"mat-elevation-z8","mywith"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/logo-mini.png","alt","logo","width","80%",1,"mb-4"],[1,""],["appearance","fill",1,"col-md-12","p-0"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["appearance","fill",1,"col-md-12","p-0","mb-4"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"col-md-12","mb-2",3,"disabled"],[1,"d-flex","flex-row-reverse","my-2"],[2,"font-size",".8em","color","var(--accent)","cursor","pointer",3,"routerLink"],[1,"d-flex","mt-2","mb-2"],["mat-stroked-button","","color","primary","type","button",2,"width","33%",3,"click"],["mat-stroked-button","","color","accent","type","button",2,"width","33%",3,"click"],["mat-stroked-button","","color","warn","type","button",2,"width","33%",3,"click"]],template:function(t,e){1&t&&(b.Sb(0,"mat-card",0),b.Nb(1,"app-theme"),b.Sb(2,"form",1),b.Zb("ngSubmit",function(){return e.submit(e.myForm.value)}),b.Sb(3,"div",2),b.Nb(4,"img",3),b.Sb(5,"div",4),b.Sb(6,"mat-form-field",5),b.Sb(7,"mat-label"),b.Ac(8,"Email"),b.Rb(),b.Nb(9,"input",6),b.yc(10,S,2,0,"mat-error",7),b.Rb(),b.Sb(11,"mat-form-field",8),b.Sb(12,"mat-label"),b.Ac(13,"Mot de passe"),b.Rb(),b.Nb(14,"input",9),b.Sb(15,"mat-icon",10),b.Zb("click",function(){return e.hide=!e.hide}),b.Ac(16),b.Rb(),b.Rb(),b.Sb(17,"button",11),b.Ac(18,"Connexion"),b.Rb(),b.Sb(19,"div",12),b.Sb(20,"span",13),b.Ac(21,"Activer !"),b.Rb(),b.Rb(),b.Sb(22,"div",14),b.Sb(23,"button",15),b.Zb("click",function(){return e.myForm.get("email").patchValue("sa@angular.io")}),b.Ac(24,"Super admin"),b.Rb(),b.Sb(25,"button",16),b.Zb("click",function(){return e.myForm.get("email").patchValue("admin@angular.io")}),b.Ac(26,"Admin"),b.Rb(),b.Sb(27,"button",17),b.Zb("click",function(){return e.myForm.get("email").patchValue("user@angular.io")}),b.Ac(28,"user"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.Bb(2),b.jc("formGroup",e.myForm),b.Bb(8),b.jc("ngIf",e.myForm.get("email").invalid),b.Bb(4),b.jc("type",e.hide?"password":"text"),b.Bb(2),b.Cc("",e.hide?"visibility_off":"visibility"," "),b.Bb(1),b.jc("disabled",e.myForm.invalid),b.Bb(3),b.jc("routerLink",b.kc(6,E)))},directives:[p.a,y.a,u.u,u.o,u.h,g.c,g.f,v.b,u.c,u.n,u.g,a.l,w.a,g.g,k.a,s.f,g.b],styles:["h1[_ngcontent-%COMP%]{color:var(--warn)}.mywith[_ngcontent-%COMP%]{margin:0 auto}@media screen and (min-width:600px){.mywith[_ngcontent-%COMP%]{width:25rem}}"]}),R);function B(t,e){1&t&&(b.Sb(0,"mat-error"),b.Ac(1,"Email non valide"),b.Rb())}function j(t,e){if(1&t&&(b.Sb(0,"mat-error"),b.Ac(1),b.Rb()),2&t){var r=b.dc();b.Bb(1),b.Bc(r.passwordError)}}function C(t,e){if(1&t&&(b.Sb(0,"mat-error"),b.Ac(1),b.Rb()),2&t){var r=b.dc();b.Bb(1),b.Bc(r.checkPasswordError)}}var F,I,M=function(){return["/auth/login"]},P=((I=function(){function t(e,o,i,n,a){r(this,t),this.fb=e,this.uow=o,this.router=i,this.session=n,this.snackBar=a,this.o=new m.f,this.hide=!0,this.hide2=!0,this.checkPassword=new u.e("",[u.t.required])}return i(t,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.createForm();case 1:case"end":return t.stop()}},t,this)}))}},{key:"createForm",value:function(){this.myForm=this.fb.group({id:[this.o.id],nom:[this.o.nom],prenom:[this.o.prenom],matricule:[this.o.matricule],email:[this.o.email,[u.t.required,u.t.email]],password:[this.o.password,[u.t.required]],isActive:[this.o.isActive]})}},{key:"submit",value:function(t){var e=this;this.uow.accounts.create("auth/login".replace(/\//g,"%2F"),t).subscribe(function(t){t.code<0?e.snackBar.notifyAlert(400,t.message):(e.snackBar.notifyOk(200,"Lien d'activation a \xe9t\xe9 envoyer a votre email"),e.router.navigate(["/auth"]))})}},{key:"resetForm",value:function(){this.o=new m.f,this.createForm()}},{key:"email",get:function(){return this.myForm.get("email")}},{key:"password",get:function(){return this.myForm.get("password")}},{key:"emailError",get:function(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}},{key:"passwordError",get:function(){return this.password.hasError("required")?"You must enter a value":""}},{key:"checkPasswordError",get:function(){return this.checkPassword.hasError("required")?"You must enter a value":this.checkPassword.value!==this.password.value?"les mot de pass sont pas les m\xeame":""}}]),t}()).\u0275fac=function(t){return new(t||I)(b.Mb(u.d),b.Mb(d.a),b.Mb(s.e),b.Mb(f.c),b.Mb(h.a))},I.\u0275cmp=b.Gb({type:I,selectors:[["app-create"]],decls:37,vars:12,consts:[[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/logo.png","alt","logo","width","100%",1,"mb-4","mt-3"],[1,""],["appearance","fill",1,"col-md-12","p-0"],["matInput","","formControlName","nom"],["matInput","","formControlName","prenom"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["appearance","fill",1,"col-md-12","p-0","mb-4"],["matInput","","placeholder","R\xe9p\xe9ter le mot de pass",3,"formControl","type"],["mat-raised-button","","color","accent","type","submit",1,"col-md-12","mb-2",3,"disabled"],["mat-raised-button","","color","primary","type","button",1,"col-md-12",3,"routerLink"]],template:function(t,e){1&t&&(b.Sb(0,"form",0),b.Zb("ngSubmit",function(){return e.submit(e.myForm.value)}),b.Sb(1,"mat-card-content",1),b.Nb(2,"img",2),b.Sb(3,"h1"),b.Ac(4,"Bienvenue"),b.Rb(),b.Sb(5,"div",3),b.Sb(6,"mat-form-field",4),b.Sb(7,"mat-label"),b.Ac(8,"Nom"),b.Rb(),b.Nb(9,"input",5),b.Rb(),b.Sb(10,"mat-form-field",4),b.Sb(11,"mat-label"),b.Ac(12,"Prenom"),b.Rb(),b.Nb(13,"input",6),b.Rb(),b.Sb(14,"mat-form-field",4),b.Sb(15,"mat-label"),b.Ac(16,"Email"),b.Rb(),b.Nb(17,"input",7),b.yc(18,B,2,0,"mat-error",8),b.Rb(),b.Sb(19,"mat-form-field",4),b.Sb(20,"mat-label"),b.Ac(21,"Mot de passe"),b.Rb(),b.Nb(22,"input",9),b.Sb(23,"mat-icon",10),b.Zb("click",function(){return e.hide=!e.hide}),b.Ac(24),b.Rb(),b.yc(25,j,2,1,"mat-error",8),b.Rb(),b.Sb(26,"mat-form-field",11),b.Sb(27,"mat-label"),b.Ac(28,"R\xe9p\xe9ter le mot de pass"),b.Rb(),b.Nb(29,"input",12),b.Sb(30,"mat-icon",10),b.Zb("click",function(){return e.hide2=!e.hide2}),b.Ac(31),b.Rb(),b.yc(32,C,2,1,"mat-error",8),b.Rb(),b.Sb(33,"button",13),b.Ac(34,"Inscription"),b.Rb(),b.Sb(35,"button",14),b.Ac(36," Connexion"),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.jc("formGroup",e.myForm),b.Bb(18),b.jc("ngIf",e.emailError),b.Bb(4),b.jc("type",e.hide?"password":"text"),b.Bb(2),b.Cc("",e.hide?"visibility_off":"visibility"," "),b.Bb(1),b.jc("ngIf",e.passwordError),b.Bb(4),b.jc("formControl",e.checkPassword)("type",e.hide2?"password":"text"),b.Bb(2),b.Cc("",e.hide2?"visibility_off":"visibility"," "),b.Bb(1),b.jc("ngIf",e.checkPassword.touched&&e.checkPasswordError),b.Bb(1),b.jc("disabled",e.myForm.invalid||""!==e.checkPasswordError),b.Bb(2),b.jc("routerLink",b.kc(11,M)))},directives:[u.u,u.o,u.h,p.c,g.c,g.f,v.b,u.c,u.n,u.g,a.l,w.a,g.g,u.f,k.a,s.f,g.b],styles:["h1[_ngcontent-%COMP%]{color:#e85412}"]}),I),N=((F=function(){function t(){r(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||F)},F.\u0275cmp=b.Gb({type:F,selectors:[["app-auth"]],decls:3,vars:0,consts:[[1,"row","justify-content-center","align-items-center","m-0","pl-2","pr-2"],[1,"container","justify-content-center","align-items-cente"]],template:function(t,e){1&t&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Nb(2,"router-outlet"),b.Rb(),b.Rb())},directives:[s.i],styles:[".row[_ngcontent-%COMP%]{height:100vh;width:100vw}"]}),F);function x(t,e){1&t&&(b.Sb(0,"mat-error"),b.Ac(1,"Email non valide"),b.Rb())}function O(t,e){if(1&t&&(b.Sb(0,"mat-error"),b.Ac(1),b.Rb()),2&t){var r=b.dc(2);b.Bb(1),b.Bc(r.passwordError)}}function q(t,e){if(1&t){var r=b.Tb();b.Sb(0,"mat-form-field",4),b.Sb(1,"mat-label"),b.Ac(2,"Mot de passe"),b.Rb(),b.Nb(3,"input",13),b.Sb(4,"mat-icon",14),b.Zb("click",function(){b.qc(r);var t=b.dc();return t.hide=!t.hide}),b.Ac(5),b.Rb(),b.yc(6,O,2,1,"mat-error",6),b.Rb()}if(2&t){var o=b.dc();b.Bb(3),b.jc("type",o.hide?"password":"text"),b.Bb(2),b.Cc("",o.hide?"visibility_off":"visibility"," "),b.Bb(1),b.jc("ngIf",o.passwordError)}}function G(t,e){if(1&t&&(b.Sb(0,"mat-error"),b.Ac(1),b.Rb()),2&t){var r=b.dc(2);b.Bb(1),b.Bc(r.checkPasswordError)}}function L(t,e){if(1&t){var r=b.Tb();b.Sb(0,"mat-form-field",15),b.Sb(1,"mat-label"),b.Ac(2,"R\xe9p\xe9ter le mot de pass"),b.Rb(),b.Nb(3,"input",16),b.Sb(4,"mat-icon",14),b.Zb("click",function(){b.qc(r);var t=b.dc();return t.hide2=!t.hide2}),b.Ac(5),b.Rb(),b.yc(6,G,2,1,"mat-error",6),b.Rb()}if(2&t){var o=b.dc();b.Bb(3),b.jc("formControl",o.checkPassword)("type",o.hide2?"password":"text"),b.Bb(2),b.Cc("",o.hide2?"visibility_off":"visibility"," "),b.Bb(1),b.jc("ngIf",o.checkPassword.touched&&o.checkPasswordError)}}var Z,_,Y,T=function(){return["/auth/create"]},V=function(){return["/auth/login"]},J=((Z=function(){function e(t,o,i,n,a,s){r(this,e),this.fb=t,this.uow=o,this.router=i,this.session=n,this.route=a,this.snackBar=s,this.o=new m.f,this.code="",this.hide=!0,this.hide2=!0,this.checkPassword=new u.e("",[u.t.required]),this.isEmailChecked=!1}return i(e,[{key:"ngOnInit",value:function(){if(this.code=this.route.snapshot.paramMap.get("code"),this.code){var e=t(atob(this.code).split("*"),3),r=e[0];e[1],e[2],this.o.email=r,this.isEmailChecked=!0}this.createForm()}},{key:"createForm",value:function(){this.myForm=this.fb.group({email:[this.o.email,[u.t.required,u.t.email]],password:[this.o.password,this.isEmailChecked?[u.t.required]:[]]})}},{key:"sendEmailForResetPassword",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.uow.accounts.sendEmailForResetPassword(t,"auth%2Freset","fr").subscribe(function(t){-1===t.code?(console.log(t.message),r.snackBar.notifyAlert(400,t.message)):(console.log(t.message),r.snackBar.notifyOk(200,t.message),r.router.navigate(["/auth/login"]))},function(t){console.log(t.error)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"resetPassword",value:function(t){var e=this;this.uow.accounts.resetPassword({email:this.o.email,password:t}).subscribe(function(t){-1===t.code?console.log("Email Incorrect"):1===t.code&&(console.log(t.message),e.router.navigate(["/auth/login"]))},function(t){console.log(t.error)})}},{key:"email",get:function(){return this.myForm.get("email")}},{key:"password",get:function(){return this.myForm.get("password")}},{key:"emailError",get:function(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}},{key:"passwordError",get:function(){return this.password.hasError("required")?"You must enter a value":""}},{key:"checkPasswordError",get:function(){return this.checkPassword.hasError("required")?"You must enter a value":this.checkPassword.value!==this.password.value?"les mot de pass sont pas les m\xeame":""}}]),e}()).\u0275fac=function(t){return new(t||Z)(b.Mb(u.d),b.Mb(d.a),b.Mb(s.e),b.Mb(f.c),b.Mb(s.a),b.Mb(h.a))},Z.\u0275cmp=b.Gb({type:Z,selectors:[["app-reset"]],decls:20,vars:10,consts:[[3,"formGroup"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/logo.png","alt","logo","width","100%",1,"mb-4","mt-3"],[1,""],["appearance","fill",1,"col-md-12","p-0"],["matInput","","formControlName","email","placeholder","Email address",3,"readonly"],[4,"ngIf"],["appearance","fill","class","col-md-12 p-0",4,"ngIf"],["appearance","fill","class","col-md-12 p-0 mb-4",4,"ngIf"],["mat-raised-button","","color","primary",1,"col-md-12","mb-2",3,"disabled","click"],["mat-raised-button","","color","accent","type","button",1,"col-md-12",3,"routerLink"],[1,"d-flex","flex-row-reverse","mt-2","mb-2","text-muted"],[2,"cursor","pointer",3,"routerLink"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["appearance","fill",1,"col-md-12","p-0","mb-4"],["matInput","","placeholder","R\xe9p\xe9ter le mot de pass",3,"formControl","type"]],template:function(t,e){1&t&&(b.Sb(0,"form",0),b.Sb(1,"mat-card-content",1),b.Nb(2,"img",2),b.Sb(3,"h3"),b.Ac(4,"VEUILLEZ SAISIR VOTRE ADRESSE EMAIL"),b.Rb(),b.Sb(5,"div",3),b.Sb(6,"mat-form-field",4),b.Sb(7,"mat-label"),b.Ac(8,"Email"),b.Rb(),b.Nb(9,"input",5),b.yc(10,x,2,0,"mat-error",6),b.Rb(),b.yc(11,q,7,3,"mat-form-field",7),b.yc(12,L,7,4,"mat-form-field",8),b.Sb(13,"button",9),b.Zb("click",function(){return e.isEmailChecked?e.resetPassword(e.checkPassword.value):e.sendEmailForResetPassword(e.email.value)}),b.Ac(14," R\xe9initialiser "),b.Rb(),b.Sb(15,"button",10),b.Ac(16," Inscription "),b.Rb(),b.Sb(17,"div",11),b.Sb(18,"span",12),b.Ac(19,"Connexion ?"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.jc("formGroup",e.myForm),b.Bb(9),b.jc("readonly",e.isEmailChecked),b.Bb(1),b.jc("ngIf",e.emailError),b.Bb(1),b.jc("ngIf",e.isEmailChecked),b.Bb(1),b.jc("ngIf",e.isEmailChecked),b.Bb(1),b.jc("disabled",e.myForm.invalid||e.isEmailChecked&&""!==e.checkPasswordError),b.Bb(2),b.jc("routerLink",b.kc(8,T)),b.Bb(3),b.jc("routerLink",b.kc(9,V)))},directives:[u.u,u.o,u.h,p.c,g.c,g.f,v.b,u.c,u.n,u.g,a.l,k.a,s.f,g.b,w.a,g.g,u.f],styles:["h3[_ngcontent-%COMP%]{color:#e85412}"]}),Z),D=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:N,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login/:code",component:A},{path:"login",component:A},{path:"create",component:P},{path:"reset/:code",component:J},{path:"reset",component:J}]}],K=((_=function t(){r(this,t)}).\u0275mod=b.Kb({type:_}),_.\u0275inj=b.Jb({factory:function(t){return new(t||_)},imports:[[s.h.forChild(D)],s.h]}),_),X=n("tk/3"),z=((Y=function t(){r(this,t)}).\u0275mod=b.Kb({type:Y}),Y.\u0275inj=b.Jb({factory:function(t){return new(t||Y)},imports:[[a.c,K,u.i,u.r,X.c,p.e,g.e,v.c,w.b,k.b,y.b]]}),Y)}}])}();