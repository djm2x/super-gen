(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{dru4:function(t,e,i){"use strict";i.r(e),i.d(e,"PointageModule",function(){return wt});var o=i("ofXK"),a=i("tyNb"),n=i("mrSG"),r=i("fXoL"),s=i("VRyK"),c=i("3Pt+"),l=i("0IaG"),m=i("V2kc"),b=i("7q3A"),u=i("M0ag"),d=i("/t3+"),h=i("f0Cb"),p=i("kmnG"),g=i("d3UM"),f=i("qFsG"),S=i("iadO"),y=i("QibW"),R=i("bTqV"),v=i("FKr1");function F(t,e){if(1&t){const t=r.Tb();r.Sb(0,"mat-option",27),r.Zb("click",function(){r.qc(t);const i=e.$implicit;return r.dc().getPlaning(i.entity)}),r.Ac(1),r.Rb()}if(2&t){const t=e.$implicit;r.jc("value",t.id),r.Bb(1),r.Dc("",t.nom," ",t.prenom,"")}}function w(t,e){1&t&&(r.Sb(0,"mat-error"),r.Ac(1,"Horaire Non Valide!"),r.Rb())}function C(t,e){1&t&&(r.Sb(0,"mat-error"),r.Ac(1,"Horaire Non Valide!"),r.Rb())}function A(t,e){1&t&&(r.Sb(0,"mat-error"),r.Ac(1,"Horaire Non Valide!"),r.Rb())}function M(t,e){1&t&&(r.Sb(0,"mat-error"),r.Ac(1,"Horaire Non Valide!"),r.Rb())}function E(t,e){if(1&t){const t=r.Tb();r.Sb(0,"mat-radio-button",28),r.Zb("change",function(e){return r.qc(t),r.dc().radioChange(e)}),r.Ac(1),r.Rb()}if(2&t){const t=e.$implicit;r.jc("value",t.id),r.Bb(1),r.Cc(" ",t.name," ")}}function B(t,e){if(1&t&&(r.Sb(0,"mat-option",32),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.jc("value",t),r.Bb(1),r.Bc(t)}}function k(t,e){if(1&t&&(r.Sb(0,"mat-form-field",29),r.Sb(1,"mat-label"),r.Ac(2,"List des Absences Justifi\xe9s"),r.Rb(),r.Sb(3,"mat-select",30),r.yc(4,B,2,2,"mat-option",31),r.Rb(),r.Rb()),2&t){const t=r.dc();r.Bb(4),r.jc("ngForOf",t.uow.absences)}}let D=(()=>{class t{constructor(t,e,i,o,a){this.dialogRef=t,this.data=e,this.fb=i,this.uow=o,this.session=a,this.subs=[],this.title="",this.edition=!1,this.collaborateurs=this.uow.collaborateurs.get(),this.total=0,this.entity=""}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){this.o=this.data.model,this.title=this.data.title,this.edition=this.data.edition,this.o.idUser&&0!==this.o.idUser||(this.o.idUser=this.session.user.id),this.createForm(),this.total=this.uow.deffMinute(this.o),this.getPlaning(this.o.entity)})}imputChange(t){if(console.log(this.myForm.get("pointageOption").value),this.total=this.uow.deffMinute(this.myForm.value),this.planing){const{comment:t,retardMatin:e,anticipationMatin:i,retardSoire:o,anticipationSoire:a}=this.uow.calculeLateness(this.myForm.value,this.planing);this.myForm.get("commentaire").setValue(t),this.myForm.get("retardMatin").setValue(e),this.myForm.get("anticipationMatin").setValue(i),this.myForm.get("retardSoire").setValue(o),this.myForm.get("anticipationSoire").setValue(a)}0===this.total&&this.myForm.get("pointageOption").setValue(3)}radioChange(t){switch(t.value){case 0:if(this.planing){const{comment:t,retardMatin:e,anticipationMatin:i,retardSoire:o,anticipationSoire:a}=this.uow.calculeLateness(this.myForm.value,this.planing);this.myForm.get("commentaire").setValue(t),this.myForm.get("retardMatin").setValue(e),this.myForm.get("anticipationMatin").setValue(i),this.myForm.get("retardSoire").setValue(o),this.myForm.get("anticipationSoire").setValue(a)}break;case 1:this.myForm.get("matinEntree").setValue("00:00"),this.myForm.get("matinSortie").setValue("00:00"),this.myForm.get("soireEntree").setValue("00:00"),this.myForm.get("soireSortie").setValue("00:00"),this.total=this.uow.deffMinute(this.myForm.value),this.myForm.get("commentaire").setValue(this.uow.pointageOptions[1].name);break;case 2:this.myForm.get("matinEntree").setValue(this.planing.matinEntree),this.myForm.get("matinSortie").setValue(this.planing.matinSortie),this.myForm.get("soireEntree").setValue(this.planing.soireEntree),this.myForm.get("soireSortie").setValue(this.planing.soireSortie),this.total=this.uow.deffMinute(this.myForm.value),this.myForm.get("commentaire").setValue(this.uow.pointageOptions[2].name);break;case 3:this.myForm.get("matinEntree").setValue("00:00"),this.myForm.get("matinSortie").setValue("00:00"),this.myForm.get("soireEntree").setValue("00:00"),this.myForm.get("soireSortie").setValue("00:00"),this.total=this.uow.deffMinute(this.myForm.value),this.myForm.get("commentaire").setValue(this.uow.pointageOptions[3].name)}}getPlaning(t){if(this.entity===t)return;this.planing=null,this.entity=t;const e=new Date(this.myForm.get("date").value);this.uow.planings.getPlaning(t,e.getDay()).subscribe(t=>{this.planing=t.p})}onNoClick(){this.dialogRef.close()}onOkClick(t){t.date=this.uow.valideDate(t.date);let e=null;t.totalHeurs=this.total,e=this.uow.pointages.post(t).subscribe(e=>{this.dialogRef.close(t)}),this.subs.push(e)}createForm(){this.myForm=this.fb.group({date:[this.o.date,[c.t.required]],idCollaborateur:[this.o.idCollaborateur,[c.t.required,c.t.min(1)]],time:[this.o.time],moment:[this.o.moment,[c.t.required]],etat:[this.o.etat,[c.t.required]],matinEntree:[this.o.matinEntree,[this.timeValidation]],matinSortie:[this.o.matinSortie,[this.timeValidation]],soireEntree:[this.o.soireEntree,[this.timeValidation]],soireSortie:[this.o.soireSortie,[this.timeValidation]],totalHeurs:[this.o.totalHeurs,[]],retardMatin:[this.o.retardMatin,[]],anticipationMatin:[this.o.anticipationMatin,[]],retardSoire:[this.o.retardSoire,[]],anticipationSoire:[this.o.anticipationSoire,[]],pointageOption:[this.o.pointageOption,[]],commentaire:[this.o.commentaire,[]],idUser:[this.o.idUser,[c.t.required,c.t.min(1)]]})}resetForm(){this.o=new m.e,this.createForm()}timeValidation(t){const e=t.value;return!e||2===e.indexOf(":")&&5===e.length?null:{timeError:!0}}ngOnDestroy(){this.subs.forEach(t=>{t.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(l.g),r.Mb(l.a),r.Mb(c.d),r.Mb(b.a),r.Mb(u.c))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-update"]],decls:63,vars:19,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],[1,"row","m-0",3,"formGroup"],["appearance","fill",1,"col-md-6"],["formControlName","idCollaborateur"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["appearance","fill",1,"col-md-4"],["matInput","","formControlName","matinEntree","placeholder","00:00",3,"ngModelChange"],[4,"ngIf"],["matInput","","formControlName","matinSortie","placeholder","00:00",3,"ngModelChange"],[1,"col-md-4"],["matInput","","formControlName","soireEntree","placeholder","00:00",3,"ngModelChange"],["matInput","","formControlName","soireSortie","placeholder","00:00",3,"ngModelChange"],["matInput","","readonly","",3,"value"],[1,"col-md-12"],[1,"col-md-3","mb-5","mt-4"],["formControlName","pointageOption",1,"d-flex","flex-column",3,"disabled"],["labelPosition","before",3,"value","change",4,"ngFor","ngForOf"],["class","col-md-4","style","margin-top: 25px;",4,"ngIf"],["align","end"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"],[3,"value","click"],["labelPosition","before",3,"value","change"],[1,"col-md-4",2,"margin-top","25px"],["formControlName","commentaire"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(r.Sb(0,"div",0),r.Sb(1,"h1",1),r.Sb(2,"mat-toolbar",2),r.Sb(3,"span"),r.Ac(4),r.Rb(),r.Rb(),r.Nb(5,"mat-divider"),r.Rb(),r.Sb(6,"div",3),r.Sb(7,"mat-dialog-content"),r.Sb(8,"form",4),r.Sb(9,"mat-form-field",5),r.Sb(10,"mat-label"),r.Ac(11,"collaborateurs"),r.Rb(),r.Sb(12,"mat-select",6),r.yc(13,F,2,3,"mat-option",7),r.ec(14,"async"),r.Rb(),r.Rb(),r.Sb(15,"mat-form-field",5),r.Sb(16,"mat-label"),r.Ac(17,"date"),r.Rb(),r.Nb(18,"input",8),r.Nb(19,"mat-datepicker-toggle",9),r.Nb(20,"mat-datepicker",null,10),r.Rb(),r.Sb(22,"mat-form-field",11),r.Sb(23,"mat-label"),r.Ac(24,"Entr\xe9e (Matin)"),r.Rb(),r.Sb(25,"input",12),r.Zb("ngModelChange",function(t){return e.imputChange(t)}),r.Rb(),r.yc(26,w,2,0,"mat-error",13),r.Rb(),r.Sb(27,"mat-form-field",11),r.Sb(28,"mat-label"),r.Ac(29,"Sortie (Matin)"),r.Rb(),r.Sb(30,"input",14),r.Zb("ngModelChange",function(t){return e.imputChange(t)}),r.Rb(),r.yc(31,C,2,0,"mat-error",13),r.Rb(),r.Nb(32,"div",15),r.Sb(33,"mat-form-field",11),r.Sb(34,"mat-label"),r.Ac(35,"Entr\xe9e (Soir)"),r.Rb(),r.Sb(36,"input",16),r.Zb("ngModelChange",function(t){return e.imputChange(t)}),r.Rb(),r.yc(37,A,2,0,"mat-error",13),r.Rb(),r.Sb(38,"mat-form-field",11),r.Sb(39,"mat-label"),r.Ac(40,"Sortie (Soir)"),r.Rb(),r.Sb(41,"input",17),r.Zb("ngModelChange",function(t){return e.imputChange(t)}),r.Rb(),r.yc(42,M,2,0,"mat-error",13),r.Rb(),r.Sb(43,"mat-form-field",11),r.Sb(44,"mat-label"),r.Ac(45,"Total"),r.Rb(),r.Nb(46,"input",18),r.Rb(),r.Sb(47,"div",19),r.Sb(48,"p"),r.Ac(49),r.Rb(),r.Sb(50,"p"),r.Ac(51),r.Rb(),r.Sb(52,"p"),r.Ac(53),r.Rb(),r.Rb(),r.Sb(54,"div",20),r.Sb(55,"mat-radio-group",21),r.yc(56,E,2,2,"mat-radio-button",22),r.Rb(),r.Rb(),r.yc(57,k,5,1,"mat-form-field",23),r.Rb(),r.Rb(),r.Sb(58,"mat-dialog-actions",24),r.Sb(59,"button",25),r.Zb("click",function(){return e.onNoClick()}),r.Ac(60,"Annuler"),r.Rb(),r.Sb(61,"button",26),r.Zb("click",function(){return e.onOkClick(e.myForm.getRawValue())}),r.Ac(62,"Enregistre"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t){const t=r.oc(21);r.Bb(4),r.Bc(e.title),r.Bb(4),r.jc("formGroup",e.myForm),r.Bb(5),r.jc("ngForOf",r.fc(14,17,e.collaborateurs)),r.Bb(5),r.jc("matDatepicker",t),r.Bb(1),r.jc("for",t),r.Bb(7),r.jc("ngIf",null==e.myForm.get("matinEntree").errors?null:e.myForm.get("matinEntree").errors.timeError),r.Bb(5),r.jc("ngIf",null==e.myForm.get("matinSortie").errors?null:e.myForm.get("matinSortie").errors.timeError),r.Bb(6),r.jc("ngIf",null==e.myForm.get("soireEntree").errors?null:e.myForm.get("soireEntree").errors.timeError),r.Bb(5),r.jc("ngIf",null==e.myForm.get("soireSortie").errors?null:e.myForm.get("soireSortie").errors.timeError),r.Bb(4),r.jc("value",(e.total/60).toFixed(2)),r.Bb(3),r.Cc("Retard : ",+e.myForm.get("retardMatin").value+ +e.myForm.get("retardSoire").value,""),r.Bb(2),r.Cc("Anticipation : ",+e.myForm.get("anticipationMatin").value+ +e.myForm.get("anticipationSoire").value,""),r.Bb(2),r.Cc("Commentaire : ",e.myForm.get("commentaire").value,""),r.Bb(2),r.jc("disabled",!e.planing),r.Bb(1),r.jc("ngForOf",e.uow.pointageOptions),r.Bb(1),r.jc("ngIf",1===e.myForm.get("pointageOption").value),r.Bb(4),r.jc("disabled",e.myForm.invalid)}},directives:[l.h,d.a,h.a,l.e,c.u,c.o,c.h,p.c,p.f,g.a,c.n,c.g,o.k,f.b,c.c,S.e,S.h,p.g,S.d,o.l,y.b,l.c,R.a,v.m,p.b,y.a],pipes:[o.b],styles:[""]}),t})();var x=i("M9IT"),V=i("Dh3D"),O=i("JX91"),j=i("QZ4V"),N=i("AytR"),P=i("qQ+2"),I=i("hUFt"),$=i("NFeN"),H=i("7EHt"),Z=i("n1FK"),L=i("+0xr"),T=i("Xa2L");const Q=["tb"];function q(t,e){if(1&t&&(r.Sb(0,"mat-option",45),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.jc("value",t),r.Bb(1),r.Bc(t)}}function U(t,e){if(1&t&&(r.Sb(0,"mat-option",45),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.jc("value",t.id),r.Bb(1),r.Bc(t.nom)}}function G(t,e){1&t&&r.Nb(0,"mat-spinner")}function z(t,e){if(1&t&&(r.Sb(0,"div",46),r.yc(1,G,1,0,"mat-spinner",47),r.Rb()),2&t){const t=r.dc();r.Bb(1),r.jc("ngIf",t.isLoadingResults)}}function _(t,e){1&t&&(r.Sb(0,"th",48),r.Ac(1,"Entiti\xe9e"),r.Rb())}function J(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(t.entity)}}function K(t,e){1&t&&(r.Sb(0,"th",48),r.Ac(1,"Collaborateur"),r.Rb())}function X(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(t.collaborateur)}}function Y(t,e){1&t&&(r.Sb(0,"th",50),r.Ac(1,"Date"),r.Rb())}function W(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.ec(2,"date"),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(r.gc(2,1,t.date,"dd/MM/yyyy"))}}function tt(t,e){1&t&&(r.Sb(0,"th",50),r.Ac(1,"Entr\xe9e (Matin)"),r.Rb())}function et(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(""!==t.matinEntree?t.matinEntree:"--:--")}}function it(t,e){1&t&&(r.Sb(0,"th",50),r.Ac(1,"Sortie (Matin)"),r.Rb())}function ot(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(""!==t.matinSortie?t.matinSortie:"--:--")}}function at(t,e){1&t&&(r.Sb(0,"th",50),r.Ac(1,"Entr\xe9e (Soir)"),r.Rb())}function nt(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(""!==t.soireEntree?t.soireEntree:"--:--")}}function rt(t,e){1&t&&(r.Sb(0,"th",50),r.Ac(1,"Sortie (Soir)"),r.Rb())}function st(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc(""!==t.soireSortie?t.soireSortie:"--:--")}}function ct(t,e){1&t&&(r.Sb(0,"th",48),r.Ac(1,"Resultat"),r.Rb())}function lt(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit,i=r.dc();r.Bb(1),r.Cc(" ",i.uow.pointageOptions[t.pointageOption].name,"")}}function mt(t,e){1&t&&(r.Sb(0,"th",48),r.Ac(1,"Commentaire"),r.Rb())}function bt(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Cc(" ",t.commentaire&&""!==t.commentaire?t.commentaire:"RAS","")}}function ut(t,e){1&t&&(r.Sb(0,"th",48),r.Ac(1,"Total"),r.Rb())}function dt(t,e){if(1&t&&(r.Sb(0,"td",49),r.Ac(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Bc((t.totalHeurs/60).toFixed(2))}}function ht(t,e){1&t&&(r.Sb(0,"th",48),r.Ac(1," options "),r.Rb())}function pt(t,e){if(1&t){const t=r.Tb();r.Sb(0,"td",49),r.Sb(1,"div",51),r.Sb(2,"button",52),r.Zb("click",function(){r.qc(t);const i=e.$implicit;return r.dc().edit(i)}),r.Sb(3,"mat-icon"),r.Ac(4,"create"),r.Rb(),r.Rb(),r.Sb(5,"button",53),r.Zb("click",function(){r.qc(t);const i=e.$implicit;return r.dc().delete(i)}),r.Sb(6,"mat-icon"),r.Ac(7,"delete_sweep"),r.Rb(),r.Rb(),r.Rb(),r.Rb()}}function gt(t,e){1&t&&r.Nb(0,"tr",54)}function ft(t,e){1&t&&r.Nb(0,"tr",55)}const St=function(){return[10,25,50,100,250]},yt=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class t{constructor(t,e,i,o,a,n,s){this.uow=t,this.dialog=e,this.excel=i,this.mydialog=o,this.url=a,this.pdf=n,this.session=s,this.update=new r.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.isDev=!N.a.production,this.subs=[],this.dataSource=[],this.selectedList=[],this.displayedColumns=["collaborateur","entity","date","matinEntree","matinSortie","soireEntree","soireSortie","totalHeurs","pointageOption","commentaire","option"],this.panelOpenState=!1,this.idCollaborateur=new c.e(0),this.matinEntree=new c.e(""),this.matinSortie=new c.e(""),this.soireEntree=new c.e(""),this.soireSortie=new c.e(""),this.idUser=new c.e(0),this.entity=new c.e(""),this.d1=new c.e(new Date),this.d2=new c.e(new Date),this.toDay=new Date,this.collaborateurs=[],this.users=this.uow.users.get(),this.entities=j}ngOnInit(){const t=Object(s.a)(this.sort.sortChange,this.paginator.page,this.update).pipe(Object(O.a)(null)).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=10;const e=this.paginator.pageIndex*this.paginator.pageSize;this.isLoadingResults=!0,this.getPage(e,this.paginator.pageSize,this.sort.active?this.sort.active:"date",this.sort.direction?this.sort.direction:"asc",""===this.entity.value?"*":this.entity.value,0===this.idCollaborateur.value?0:this.idCollaborateur.value,""===this.matinEntree.value?"*":this.matinEntree.value,""===this.matinSortie.value?"*":this.matinSortie.value,""===this.soireEntree.value?"*":this.soireEntree.value,""===this.soireSortie.value?"*":this.soireSortie.value,0===this.idUser.value?0:this.idUser.value,this.uow.valideDate(this.d1.value).toISOString(),this.uow.valideDate(this.d2.value).toISOString())});this.subs.push(t)}generatePdf(){const t=[["Entiti\xe9e","Collaborateur","Date","Entr\xe9e (Matin)","Sortie (Matin)","Entr\xe9e (Soir)","Sortie (Soir)","Total","Resultat","Commentaire"].map(t=>({text:t}))];this.dataSource.map(e=>{t.push([{text:e.entity},{text:e.collaborateur},{text:new o.e("fr-FR").transform(e.date,"dd/MM/yyyy")},{text:e.matinEntree},{text:e.matinSortie},{text:e.soireEntree},{text:e.soireSortie},{text:e.totalHeurs},{text:this.uow.pointageOptions[e.pointageOption].name},{text:e.commentaire}])}),this.pdf.generatePdf(t,"A4",`${this.session.user.nom} ${this.session.user.prenom}`,"Historique Pointage")}generateExcel(){const t=this.dataSource.map((t,e)=>({Entiti\u00e9e:t.entity,Collaborateur:t.collaborateur,Date:new o.e("fr-FR").transform(t.date,"dd/MM/yyyy"),"Entr\xe9e (Matin)":t.matinEntree,"Sortie (Matin)":t.matinSortie,"Entr\xe9e (Soir)":t.soireEntree,"Sortie (Soir)":t.soireSortie,Total:t.totalHeurs,Resultat:this.uow.pointageOptions[t.pointageOption].name,Commentaire:t.commentaire}));this.excel.json_to_sheet(t)}selectChange(t){this.uow.collaborateurs.getByForeignkey(t).subscribe(t=>{this.collaborateurs=t})}reset(){this.idCollaborateur.setValue(0),this.matinEntree.setValue(""),this.matinSortie.setValue(""),this.soireEntree.setValue(""),this.soireSortie.setValue(""),this.idUser.setValue(0),this.entity.setValue(""),this.d1.setValue(new Date),this.d2.setValue(new Date),this.update.next(!0)}search(){this.update.next(!0)}trackFn(t,e){return e.progressValue}getPage(t,e,i,o,a,n,r,s,c,l,m,b,u){const d=this.uow.pointages.getAll(t,e,i,o,a,n,r,s,c,l,m,b,u).subscribe(t=>{console.log(t.list),this.dataSource=t.list,this.resultsLength=t.count,this.isLoadingResults=!1});this.subs.push(d)}openDialog(t,e,i){return this.dialog.open(D,{width:"1100px",disableClose:!0,data:{model:t,title:e,edition:i}}).afterClosed()}add(){this.openDialog(new m.e,"Actualisation Pointage",!1).subscribe(t=>{t&&this.update.next(!0)})}edit(t){this.openDialog(t,"Actualisation Pointage",!0).subscribe(t=>{t&&this.update.next(!0)})}deff(t){const e=new Date(t.date);let i=0;if(""!==t.matinEntree&&""!==t.matinSortie){const o=new Date(e.getFullYear(),e.getMonth(),e.getDate(),...t.matinEntree.split(":").map(t=>+t)),a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),...t.matinSortie.split(":").map(t=>+t));i=Math.floor(Math.abs(a.getTime()-o.getTime())/6e4)}if(""!==t.soireEntree&&""!==t.soireSortie){const o=new Date(e.getFullYear(),e.getMonth(),e.getDate(),...t.soireEntree.split(":").map(t=>+t)),a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),...t.soireSortie.split(":").map(t=>+t));i+=Math.floor(Math.abs(a.getTime()-o.getTime())/6e4)}return`${Math.floor(i/60)} heur(s) et ${(i%60).toFixed(0)} minute`}delete(t){return Object(n.a)(this,void 0,void 0,function*(){if("ok"===(yield this.mydialog.openDialog("Pointage").toPromise())){const e=this.uow.pointages.deleteOverride(t.idCollaborateur,t.date).subscribe(()=>this.update.next(!0));this.subs.push(e)}})}displayImage(t){return t?t&&t.startsWith("http")?t:`${this.url}/pointages/${t.replace(";","")}`:"assets/404.jpg"}imgError(t){t.src="assets/404.jpg"}ngOnDestroy(){this.subs.forEach(t=>{t.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(b.a),r.Mb(l.b),r.Mb(P.a),r.Mb(I.a),r.Mb("BASE_URL"),r.Mb(u.b),r.Mb(u.c))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-pointage"]],viewQuery:function(t,e){if(1&t&&(r.Gc(Q,!0),r.uc(x.a,!0),r.uc(V.a,!0)),2&t){let t;r.nc(t=r.ac())&&(e.tb=t.first),r.nc(t=r.ac())&&(e.paginator=t.first),r.nc(t=r.ac())&&(e.sort=t.first)}},decls:113,vars:24,consts:[[1,"d-flex","flex-row-reverse","pt-3","mb-3"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"click"],["expanded","",3,"opened","closed"],[1,"d-flex","align-items-center"],[1,"mb-0","ml-2"],[1,"mt-2"],["appearance","fill",1,"col-md-6"],["matInput","",3,"ngxMatDatetimePicker","formControl"],["matSuffix","",3,"for"],["picker1",""],["picker",""],[3,"formControl","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"formControl"],["value","0"],[1,"d-flex","flex-row-reverse","mb-2","mr-2"],["mat-raised-button","",3,"click"],[1,"example-container","mat-elevation-z8","mt-2"],["class","example-loading-shade",4,"ngIf"],["id","tb",1,"example-table-container"],["tb",""],["id","user",1,"d-flex","justify-content-between","my-4","px-2",2,"display","none !important"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource","trackBy"],["table",""],["matColumnDef","entity"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","collaborateur"],["matColumnDef","date"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","matinEntree"],["matColumnDef","matinSortie"],["matColumnDef","soireEntree"],["matColumnDef","soireSortie"],["matColumnDef","pointageOption"],["matColumnDef","commentaire"],["matColumnDef","totalHeurs"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[3,"value"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"button-row"],["title","Modifier","mat-icon-button","","color","accent",3,"click"],["title","Supprimer","mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(r.Sb(0,"div",0),r.Sb(1,"button",1),r.Zb("click",function(){return e.add()}),r.Sb(2,"mat-icon"),r.Ac(3,"edit"),r.Rb(),r.Ac(4," Pointage "),r.Rb(),r.Ac(5," \xa0 "),r.Sb(6,"button",2),r.Zb("click",function(){return e.generateExcel()}),r.Sb(7,"mat-icon"),r.Ac(8,"cloud_download"),r.Rb(),r.Ac(9," Excel "),r.Rb(),r.Ac(10," \xa0 "),r.Sb(11,"button",3),r.Zb("click",function(){return e.generatePdf()}),r.Sb(12,"mat-icon"),r.Ac(13,"cloud_download"),r.Rb(),r.Ac(14," Pdf "),r.Rb(),r.Rb(),r.Sb(15,"mat-accordion"),r.Sb(16,"mat-expansion-panel",4),r.Zb("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),r.Sb(17,"mat-expansion-panel-header"),r.Sb(18,"mat-panel-title",5),r.Sb(19,"mat-icon"),r.Ac(20,"search"),r.Rb(),r.Sb(21,"p",6),r.Ac(22,"Recherche"),r.Rb(),r.Rb(),r.Nb(23,"mat-panel-description"),r.Rb(),r.Nb(24,"mat-divider"),r.Sb(25,"div",7),r.Sb(26,"mat-form-field",8),r.Sb(27,"mat-label"),r.Ac(28,"date du"),r.Rb(),r.Nb(29,"input",9),r.Nb(30,"mat-datepicker-toggle",10),r.Nb(31,"ngx-mat-datetime-picker",null,11),r.Rb(),r.Sb(33,"mat-form-field",8),r.Sb(34,"mat-label"),r.Ac(35,"date au"),r.Rb(),r.Nb(36,"input",9),r.Nb(37,"mat-datepicker-toggle",10),r.Nb(38,"ngx-mat-datetime-picker",null,12),r.Rb(),r.Sb(40,"mat-form-field",8),r.Sb(41,"mat-label"),r.Ac(42,"entities"),r.Rb(),r.Sb(43,"mat-select",13),r.Zb("selectionChange",function(t){return e.selectChange(t.value)}),r.Sb(44,"mat-option",14),r.Ac(45,"Tous"),r.Rb(),r.yc(46,q,2,2,"mat-option",15),r.Rb(),r.Rb(),r.Sb(47,"mat-form-field",8),r.Sb(48,"mat-label"),r.Ac(49,"collaborateur"),r.Rb(),r.Sb(50,"mat-select",16),r.Sb(51,"mat-option",17),r.Ac(52,"Tous"),r.Rb(),r.yc(53,U,2,2,"mat-option",15),r.Rb(),r.Rb(),r.Rb(),r.Sb(54,"div",18),r.Sb(55,"button",19),r.Zb("click",function(){return e.reset()}),r.Sb(56,"mat-icon"),r.Ac(57,"refresh"),r.Rb(),r.Ac(58," R\xe9initialiser "),r.Rb(),r.Ac(59," \xa0\xa0 "),r.Sb(60,"button",1),r.Zb("click",function(){return e.search()}),r.Sb(61,"mat-icon"),r.Ac(62,"search"),r.Rb(),r.Ac(63," FIltrer "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(64,"div",20),r.yc(65,z,2,1,"div",21),r.Sb(66,"div",22,23),r.Sb(68,"div",24),r.Sb(69,"h3"),r.Ac(70),r.Rb(),r.Sb(71,"h3"),r.Ac(72),r.ec(73,"date"),r.Rb(),r.Rb(),r.Sb(74,"table",25,26),r.Qb(76,27),r.yc(77,_,2,0,"th",28),r.yc(78,J,2,1,"td",29),r.Pb(),r.Qb(79,30),r.yc(80,K,2,0,"th",28),r.yc(81,X,2,1,"td",29),r.Pb(),r.Qb(82,31),r.yc(83,Y,2,0,"th",32),r.yc(84,W,3,4,"td",29),r.Pb(),r.Qb(85,33),r.yc(86,tt,2,0,"th",32),r.yc(87,et,2,1,"td",29),r.Pb(),r.Qb(88,34),r.yc(89,it,2,0,"th",32),r.yc(90,ot,2,1,"td",29),r.Pb(),r.Qb(91,35),r.yc(92,at,2,0,"th",32),r.yc(93,nt,2,1,"td",29),r.Pb(),r.Qb(94,36),r.yc(95,rt,2,0,"th",32),r.yc(96,st,2,1,"td",29),r.Pb(),r.Qb(97,37),r.yc(98,ct,2,0,"th",28),r.yc(99,lt,2,1,"td",29),r.Pb(),r.Qb(100,38),r.yc(101,mt,2,0,"th",28),r.yc(102,bt,2,1,"td",29),r.Pb(),r.Qb(103,39),r.yc(104,ut,2,0,"th",28),r.yc(105,dt,2,1,"td",29),r.Pb(),r.Qb(106,40),r.yc(107,ht,2,0,"th",28),r.yc(108,pt,8,0,"td",29),r.Pb(),r.yc(109,gt,1,0,"tr",41),r.yc(110,ft,1,0,"tr",42),r.Rb(),r.Rb(),r.Nb(111,"mat-paginator",43,44),r.Rb()),2&t){const t=r.oc(32),i=r.oc(39);r.Bb(29),r.jc("ngxMatDatetimePicker",t)("formControl",e.d1),r.Bb(1),r.jc("for",t),r.Bb(6),r.jc("ngxMatDatetimePicker",i)("formControl",e.d2),r.Bb(1),r.jc("for",i),r.Bb(6),r.jc("formControl",e.entity),r.Bb(3),r.jc("ngForOf",e.entities),r.Bb(4),r.jc("formControl",e.idCollaborateur),r.Bb(3),r.jc("ngForOf",e.collaborateurs),r.Bb(12),r.jc("ngIf",e.isLoadingResults),r.Bb(5),r.Dc("",e.session.user.nom," ",e.session.user.prenom,""),r.Bb(2),r.Bc(r.gc(73,20,e.toDay,"dd/MM/yyyy HH:mm")),r.Bb(2),r.jc("dataSource",e.dataSource)("trackBy",e.trackFn),r.Bb(35),r.jc("matHeaderRowDef",e.displayedColumns),r.Bb(1),r.jc("matRowDefColumns",e.displayedColumns),r.Bb(1),r.jc("length",e.resultsLength)("pageSizeOptions",r.kc(23,St))}},directives:[R.a,$.a,H.a,H.c,H.e,H.f,H.d,h.a,p.c,p.f,f.b,Z.c,c.c,c.n,c.f,S.h,p.g,Z.d,g.a,v.m,o.k,o.l,L.n,V.a,L.c,L.i,L.b,L.k,L.m,x.a,T.b,L.h,L.a,V.b,L.j,L.l],pipes:[o.e],styles:["img[_ngcontent-%COMP%]{height:60px;width:60px;padding:3px}"]}),t})()}];let Rt=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[a.h.forChild(yt)],a.h]}),t})();var vt=i("tk/3"),Ft=i("WU52");let wt=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[{provide:v.f,useValue:"fr-FR"}],imports:[[o.c,Rt,vt.c,c.i,c.r,Z.e,Z.f,Ft.a,T.a,L.o,$.b,R.b,p.e,x.b,H.b,h.b,l.f,d.b,V.c,f.c,g.b,S.g,y.c]]}),t})()}}]);